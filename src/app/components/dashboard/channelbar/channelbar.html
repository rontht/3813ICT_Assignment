<aside class="w-[250px] flex flex-col h-full">
  <div class="flex items-center">
    <div class="flex-1">
      <div class="text-xs">Group Name:</div>
      @if (current_group) {
      <div class="text-xl mb-3 pb-5 border-b-2 border-white/10">
        {{ current_group.name }}
      </div>
      }
    </div>
    <div class="flex justify-center items-start h-full">
      @if (is_member) {
        <button
          class="ml-auto"
          (click)="askConfirm($event)"
          aria-haspopup="menu"
          [attr.aria-expanded]="confirm_menu_open"
        >
          <img src="/icons/leave.png" alt="Leave" class="w-6 h-6" />
        </button>
      }

      <!-- Dropdown confirmation menu -->
      @if (confirm_menu_open) {
      <div
        class="absolute left-20 top-10 z-10 mt-2 w-64 rounded-xl bg-main/95 backdrop-blur shadow-2xl border border-white/10 p-4"
        role="menu"
      >
        <div class="text-sm mb-3">
          Are you sure about leaving <span class="font-semibold">{{ current_group?.name }}</span
          >?
        </div>
        <div class="flex gap-2 justify-end">
          <button
            class="px-3 py-1 rounded bg-gray-600 hover:bg-gray-500"
            (click)="cancel()"
          >
            Cancel
          </button>
          @if(current_group) {
            <button
              class="px-3 py-1 rounded bg-red-700 hover:bg-red-600 text-white"
              (click)="confirm(current_group)"
            >
              Confirm
            </button>
          }
        </div>
      </div>
      }
    </div>
  </div>
  @if (current_channel) {
  <h2 class="text-md text-white mb-3">Channels</h2>
  <nav class="space-y-4 flex-1 overflow-y-auto pr-1">
    <button
      *ngFor="let channel of available_channels"
      class="bg-secondary block w-full text-left px-4 py-5 rounded-xl shadow-xl hover:bg-secondary-hover"
      [ngClass]="{
        'bg-secondary-selected': current_channel!.id === channel.id
      }"
      (click)="openChannel.emit(channel)"
    >
      # {{ channel.name }}
    </button>
  </nav>
  } @else {
  <div class="w-full h-full flex justify-center items-center">
    <div>
      <p class="text-center mb-3">
        Sorry you are not a member of any channel in this group.
      </p>
      <p class="text-center mb-3">
        To join a channel, please contact to the group admin or a super admin.
      </p>
    </div>
  </div>
  } @if (can_manage_group) {
  <div class="pt-4 mt-4 border-t-2 border-white/10">
    <button
      class="w-full px-4 py-3 rounded-xl bg-secondary shadow-xl hover:bg-secondary-hover"
      (click)="openGroupEdit.emit()"
    >
      Group Settings
    </button>
  </div>
  }
</aside>
