<div
  class="h-screen w-screen overflow-hidden bg-gradient-to-b from-pink-400 via-purple-500 to-blue-500 text-white"
>
  <div class="flex h-full">
    <!-- Group Sidebar -->
    @if (user != null) {
    <app-groupbar
      [user]="user"
      [groups]="groups"
      [current_group]="current_group"
      (openGroup)="openGroup($event)"
      (onLogout)="onLogout()"
      [can_create_group]="canCreateGroup()"
      [is_super_admin]="isSuperAdmin()"
      (openGroupCreate)="openGroupCreate($event)"
      (openManageUsers)="openManageUsers()"
      (openGroupSearch)="openGroupSearch()"
      (openAccountSettings)="openAccountSettings()"
    ></app-groupbar>
    }

    <!-- Main Content Panel -->
    @if (current_group != null) {
    <main class="flex-1 overflow-y-auto p-8 bg-main/95 rounded-3xl">
      @switch (current_group.id) { @case ("account") {
      <app-account-settings></app-account-settings>

      } @case ("create") {
      <app-group-form
        [all_users]="all_users"
        [current_group]="current_group"
        [channels]="channels"
        [create_new]="create_new_group"
        (reloadGroups)="reloadGroups($event)"
      ></app-group-form>

      } @case ("users") {
      <app-user-manager [all_users]="all_users"></app-user-manager>

      } @case ("search") {
      <app-group-search [all_groups]="all_groups"></app-group-search>

      } @default { @if (!show_group_settings) {
      <div class="flex h-full">
        <app-channelbar
          [user]="user"
          [channels]="channels"
          [current_channel]="current_channel"
          [current_group]="current_group"
          (openChannel)="openChannel($event)"
          (openGroupEdit)="openGroupEdit()"
          [can_manage_group]="canManageGroup()"
        >
        </app-channelbar>

        <section class="flex-1">
          <app-chat [current_channel]="current_channel"></app-chat>
        </section>
      </div>
      } @else {
      <app-group-form
        [all_users]="all_users"
        [current_group]="current_group"
        [channels]="channels"
        [create_new]="create_new_group"
        (reloadGroups)="reloadGroups($event)"
        (closeEdit)="closeGroupEdit($event)"
      ></app-group-form>
      } } }
    </main>

    <app-memberbar [channel]="current_channel"> </app-memberbar>
    } @else {
    <main
      class="max-w-[81.2vw] flex-1 overflow-y-auto p-8 bg-main/95 rounded-3xl"
    >
      <div class="flex h-full items-center justify-center">
        <div class="w-[50vw] max-w-3xl bg-secondary rounded-2xl p-8 shadow-xl">
          <h2 class="text-2xl font-bold mb-4 text-center">
            Your account is empty!
          </h2>
          <p class="text-white mb-6 text-center">Find a group to join!</p>
        </div>
      </div>
    </main>
    }
  </div>
</div>
